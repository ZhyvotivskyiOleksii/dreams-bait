"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[568],{3231:function(e,t,r){r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(8030).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},8960:function(e,t,r){r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(8030).Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},4697:function(e,t,r){r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(8030).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9997:function(e,t,r){r.d(t,{default:function(){return o}});var a=r(7437),i=r(7138);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,r(8030).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);var s=r(7592),n=r(4839);function o(e){let{items:t,className:r}=e;return(0,a.jsx)("div",{className:(0,n.Z)("sm:sticky sm:top-16 z-40 -mx-4 bg-slate-50 px-2 pt-2 pb-3 sm:pt-5 sm:pb-5 mb-3 sm:mb-6",r),children:(0,a.jsx)("nav",{className:"flex flex-wrap items-center gap-2 text-[13px] font-medium text-[#3e3e3e]",children:t.map((e,r)=>{let n=0===r,o=e.isHome?(0,a.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,a.jsx)(l,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:e.label})]}):(0,a.jsx)("span",{children:e.label});return(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[!n&&(0,a.jsx)(s.Z,{className:"h-4 w-4 text-slate-400"}),e.href?(0,a.jsx)(i.default,{href:e.href,className:"hover:text-slate-700 transition-colors",children:o}):(0,a.jsx)("span",{className:r===t.length-1?"text-slate-700":void 0,children:o})]},"".concat(e.label,"-").concat(r))})})})}},9989:function(e,t,r){r.d(t,{Z:function(){return d},j:function(){return m}});var a=r(7437),i=r(2265),l=r(3231),s=r(8087),n=r(3866);let o=(0,i.createContext)(void 0),c="dreams-bait-cart",u=e=>/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e);function d(e){let{children:t}=e,r=(0,s.useTranslations)(),[d,m]=(0,i.useState)([]),[f,p]=(0,i.useState)(!1),[h,x]=(0,i.useState)(null),[v,g]=(0,i.useState)(!1),[y,b]=(0,i.useState)(null),[j,w]=(0,i.useState)(!1),N=(0,i.useRef)(null);(0,i.useEffect)(()=>{let e=!0;n.O.auth.getSession().then(t=>{var r,a;let{data:i}=t;if(!e)return;let l=i.session;p(!!l),x(null!==(a=null==l?void 0:null===(r=l.user)||void 0===r?void 0:r.id)&&void 0!==a?a:null),g(!0)});let{data:t}=n.O.auth.onAuthStateChange((t,r)=>{var a,i;e&&(p(!!r),x(null!==(i=null==r?void 0:null===(a=r.user)||void 0===a?void 0:a.id)&&void 0!==i?i:null),g(!0))});return()=>{e=!1,t.subscription.unsubscribe()}},[]),(0,i.useEffect)(()=>{if(v&&!f&&j)try{localStorage.setItem(c,JSON.stringify(d))}catch(e){}},[d,f,v,j]),(0,i.useEffect)(()=>{if(v){if(f){let e=async()=>{if(!h)return;let{data:e,error:t}=await n.O.from("cart_items").select("product_id, name, image_url, price, qty").eq("user_id",h).order("created_at",{ascending:!1});!t&&e&&m(e.map(e=>{var t,r;return{id:null!==(t=e.product_id)&&void 0!==t?t:e.name,name:e.name,price:Number(e.price),image:null!==(r=e.image_url)&&void 0!==r?r:"",qty:e.qty}}))};(async()=>{try{let e=localStorage.getItem(c);if(!e)return;let t=JSON.parse(e);if(!Array.isArray(t)||0===t.length)return;let r=t.map(e=>({user_id:h,product_id:u(e.id)?e.id:null,name:e.name,image_url:e.image,price:e.price,qty:e.qty}));await n.O.from("cart_items").upsert(r,{onConflict:"user_id,product_id"}),localStorage.removeItem(c)}catch(e){}})().then(e)}else try{let e=localStorage.getItem(c);if(e){let t=JSON.parse(e);Array.isArray(t)&&m(t)}w(!0)}catch(e){w(!0)}}},[f,v,h]);let S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;m(r=>{let a=r.find(t=>t.id===e.id),i=a?r.map(r=>r.id===e.id?{...r,qty:r.qty+t}:r):[...r,{...e,qty:t}];if(f&&h){let r=a?a.qty+t:t;n.O.from("cart_items").upsert({user_id:h,product_id:u(e.id)?e.id:null,name:e.name,image_url:e.image,price:e.price,qty:r},{onConflict:"user_id,product_id"})}else try{localStorage.setItem(c,JSON.stringify(i)),w(!0)}catch(e){}return i}),b({id:Date.now(),name:e.name}),N.current&&clearTimeout(N.current),N.current=setTimeout(()=>{b(null)},2200)},_=e=>{m(t=>{let r=t.filter(t=>t.id!==e);return f&&h&&n.O.from("cart_items").delete().eq("user_id",h).eq("product_id",u(e)?e:null),r})},k=(e,t)=>{m(r=>{let a=r.map(r=>r.id===e?{...r,qty:t}:r).filter(e=>e.qty>0);return f&&h&&(t<=0?n.O.from("cart_items").delete().eq("user_id",h).eq("product_id",u(e)?e:null):n.O.from("cart_items").update({qty:t}).eq("user_id",h).eq("product_id",u(e)?e:null)),a})},O=()=>{if(m([]),f&&h)n.O.from("cart_items").delete().eq("user_id",h);else try{localStorage.removeItem(c)}catch(e){}},q=(0,i.useMemo)(()=>{let e=d.reduce((e,t)=>e+t.qty,0),t=d.reduce((e,t)=>e+t.qty*t.price,0);return{items:d,itemCount:e,total:t,addItem:S,removeItem:_,updateQty:k,clear:O}},[d]);return(0,a.jsxs)(o.Provider,{value:q,children:[t,y&&(0,a.jsxs)("div",{className:"fixed top-24 right-6 z-[70] flex items-center gap-3 rounded-2xl border border-slate-200 bg-white px-4 py-3 shadow-xl",children:[(0,a.jsx)("span",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-emerald-100 text-emerald-600",children:(0,a.jsx)(l.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-semibold text-slate-900",children:r("cart.added")}),(0,a.jsx)("div",{className:"text-xs text-slate-500 line-clamp-1",children:y.name})]})]})]})}function m(){let e=(0,i.useContext)(o);if(!e)throw Error("useCart must be used within CartProvider");return e}},971:function(e,t,r){r.d(t,{default:function(){return d}});var a=r(7437),i=r(2265),l=r(6648),s=r(8087),n=r(6463);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,r(8030).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);var c=r(4697),u=r(3866);function d(e){let{ariaLabel:t,item:r,className:d,iconClassName:m="w-4 h-4"}=e,f=(0,s.useTranslations)("favoritesModal"),p=(0,s.useLocale)(),h=(0,n.useRouter)(),x=(0,n.usePathname)(),v=(0,n.useSearchParams)(),[g,y]=(0,i.useState)(!1),[b,j]=(0,i.useState)(!1),[w,N]=(0,i.useState)(!1),[S,_]=(0,i.useState)(!1),k=v.toString(),O=k?"".concat(x,"?").concat(k):x,q=async()=>{var e;if(!r){_(!1);return}let{data:t}=await u.O.auth.getUser(),a=null===(e=t.user)||void 0===e?void 0:e.id;if(!a){_(!1);return}let{data:i}=await u.O.from("profiles").select("favorites").eq("id",a).maybeSingle();_((Array.isArray(null==i?void 0:i.favorites)?null==i?void 0:i.favorites:[]).some(e=>e.slug===r.slug||e.id===r.id))};(0,i.useEffect)(()=>{let e=!0;u.O.auth.getSession().then(t=>{let{data:r}=t;if(e){let e=!!r.session;j(e),e?q():_(!1)}});let{data:t}=u.O.auth.onAuthStateChange((e,t)=>{let r=!!t;j(r),r?q():_(!1)});return()=>{e=!1,t.subscription.unsubscribe()}},[null==r?void 0:r.id,null==r?void 0:r.slug]);let C=async e=>{var t;if(null==e||e.preventDefault(),null==e||e.stopPropagation(),!b){y(!0);return}if(!r||w)return;N(!0);let{data:a}=await u.O.auth.getUser(),i=null===(t=a.user)||void 0===t?void 0:t.id;if(!i){j(!1),y(!0),N(!1);return}let{data:l,error:s}=await u.O.from("profiles").select("favorites").eq("id",i).maybeSingle();if(s){N(!1);return}let n=Array.isArray(null==l?void 0:l.favorites)?null==l?void 0:l.favorites:[],o=n.some(e=>e.slug===r.slug||e.id===r.id);_(!o);let c=o?n.filter(e=>e.slug!==r.slug&&e.id!==r.id):[...n,r],{data:d}=await u.O.from("profiles").select("id").eq("id",i).maybeSingle();(null==d?void 0:d.id)?await u.O.from("profiles").update({favorites:c}).eq("id",i):await u.O.from("profiles").upsert({id:i,favorites:c},{onConflict:"id"}),N(!1)},I=e=>{let t=new URLSearchParams;t.set("mode",e),t.set("returnTo",O),h.push("/".concat(p,"/auth?").concat(t.toString()))};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{type:"button",className:d,"aria-label":t,onClick:C,disabled:w,"aria-pressed":S,children:(0,a.jsx)(o,{className:"".concat(m," ").concat(S?"text-rose-500 fill-rose-500":"")})}),g&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 px-4 py-8",onClick:()=>y(!1),role:"dialog","aria-modal":"true",children:(0,a.jsxs)("div",{className:"relative w-full max-w-sm rounded-3xl bg-white p-6 text-center shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("button",{type:"button",onClick:()=>y(!1),className:"absolute right-4 top-4 rounded-full p-1 text-slate-400 hover:text-slate-600","aria-label":f("close"),children:(0,a.jsx)(c.Z,{className:"h-4 w-4"})}),(0,a.jsx)("div",{className:"mx-auto mb-4 w-60",children:(0,a.jsx)(l.default,{src:"/login-img/welcom.png",alt:f("imageAlt"),width:320,height:260,className:"h-auto w-full"})}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-slate-900",children:f("title")}),(0,a.jsx)("p",{className:"mt-2 text-sm text-slate-500",children:f("subtitle")}),(0,a.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>I("login"),className:"w-full rounded-full bg-[#7dd3fc] py-3 text-sm font-semibold text-black transition-colors hover:bg-[#f5c542]",children:f("login")}),(0,a.jsx)("button",{type:"button",onClick:()=>I("register"),className:"w-full rounded-full border border-[#7dd3fc] py-3 text-sm font-semibold text-[#0f0f0f] transition-colors hover:bg-[#7dd3fc]/20",children:f("register")})]})]})})]})}},3866:function(e,t,r){r.d(t,{O:function(){return s}});var a=r(7204);let i="https://vlrzcbmjbywdptqizrmk.supabase.co".trim(),l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZscnpjYm1qYnl3ZHB0cWl6cm1rIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkzNjM0NzksImV4cCI6MjA4NDkzOTQ3OX0.pgB3GB70WRz95nQVMUvpQa8iSPwkpCO2g6Z4BVfZOiM".trim();if(!i||!l)throw Error("Missing Supabase environment variables.");try{new URL(i)}catch(e){throw Error('Invalid NEXT_PUBLIC_SUPABASE_URL: "'.concat(i,'". Use https://<project>.supabase.co'))}let s=(0,a.eI)(i,l)},4839:function(e,t,r){t.Z=function(){for(var e,t,r=0,a="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=function e(t){var r,a,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t){if(Array.isArray(t)){var l=t.length;for(r=0;r<l;r++)t[r]&&(a=e(t[r]))&&(i&&(i+=" "),i+=a)}else for(a in t)t[a]&&(i&&(i+=" "),i+=a)}return i}(e))&&(a&&(a+=" "),a+=t);return a}}}]);