(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[411],{5937:function(e,t,r){Promise.resolve().then(r.bind(r,9908))},3231:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(8030).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},9908:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var a=r(7437),s=r(6648),l=r(8087),i=r(9989),n=r(9997);function c(){let e=(0,l.useTranslations)(),t=(0,l.useTranslations)("breadcrumbs"),r=(0,l.useTranslations)("nav"),c=(0,l.useLocale)(),{total:u}=(0,i.j)();return(0,a.jsx)("div",{className:"bg-white min-h-screen",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-10",children:[(0,a.jsx)(n.default,{items:[{label:t("home"),href:"/".concat(c),isHome:!0},{label:r("cart"),href:"/".concat(c,"/cart")},{label:e("payment.title")}]}),(0,a.jsxs)("div",{className:"mx-auto max-w-3xl rounded-3xl border border-slate-200 bg-white p-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-heading text-slate-900",children:e("payment.title")}),(0,a.jsx)("p",{className:"mt-2 text-slate-500",children:e("payment.subtitle")}),(0,a.jsxs)("div",{className:"mt-6 rounded-2xl border border-slate-200 bg-slate-50 p-5",children:[(0,a.jsx)("div",{className:"text-sm font-semibold text-slate-800",children:e("payment.methods")}),(0,a.jsx)("div",{className:"mt-3 flex flex-wrap items-center gap-4",children:[{label:"Visa",src:"/paymant/visa.svg"},{label:"Mastercard",src:"/paymant/mastercard.svg"},{label:"BLIK",src:"/paymant/blik.svg"},{label:"Apple Pay",src:"/paymant/icons8-apple-pay-100.png"},{label:"Google Pay",src:"/paymant/google-pay-96.png"}].map(e=>(0,a.jsx)("span",{className:"relative h-8 w-16",children:(0,a.jsx)(s.default,{src:e.src,alt:e.label,fill:!0,sizes:"64px",className:"object-contain"})},e.label))})]}),(0,a.jsx)("button",{type:"button",className:"mt-6 w-full inline-flex items-center justify-center rounded-2xl bg-[#7dd3fc] text-black px-6 py-4 text-lg font-semibold hover:bg-[#f5c542] transition-colors",children:e("payment.payWithTotal",{total:u,currency:e("currency.uah")})})]})]})})}},9997:function(e,t,r){"use strict";r.d(t,{default:function(){return c}});var a=r(7437),s=r(7138);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,r(8030).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);var i=r(7592),n=r(4839);function c(e){let{items:t,className:r}=e;return(0,a.jsx)("div",{className:(0,n.Z)("sm:sticky sm:top-16 z-40 -mx-4 bg-slate-50 px-2 pt-2 pb-3 sm:pt-5 sm:pb-5 mb-3 sm:mb-6",r),children:(0,a.jsx)("nav",{className:"flex flex-wrap items-center gap-2 text-[13px] font-medium text-[#3e3e3e]",children:t.map((e,r)=>{let n=0===r,c=e.isHome?(0,a.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,a.jsx)(l,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:e.label})]}):(0,a.jsx)("span",{children:e.label});return(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[!n&&(0,a.jsx)(i.Z,{className:"h-4 w-4 text-slate-400"}),e.href?(0,a.jsx)(s.default,{href:e.href,className:"hover:text-slate-700 transition-colors",children:c}):(0,a.jsx)("span",{className:r===t.length-1?"text-slate-700":void 0,children:c})]},"".concat(e.label,"-").concat(r))})})})}},9989:function(e,t,r){"use strict";r.d(t,{Z:function(){return d},j:function(){return m}});var a=r(7437),s=r(2265),l=r(3231),i=r(8087),n=r(3866);let c=(0,s.createContext)(void 0),u="dreams-bait-cart",o=e=>/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e);function d(e){let{children:t}=e,r=(0,i.useTranslations)(),[d,m]=(0,s.useState)([]),[p,f]=(0,s.useState)(!1),[h,x]=(0,s.useState)(null),[y,b]=(0,s.useState)(!1),[v,g]=(0,s.useState)(null),[j,N]=(0,s.useState)(!1),_=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=!0;n.O.auth.getSession().then(t=>{var r,a;let{data:s}=t;if(!e)return;let l=s.session;f(!!l),x(null!==(a=null==l?void 0:null===(r=l.user)||void 0===r?void 0:r.id)&&void 0!==a?a:null),b(!0)});let{data:t}=n.O.auth.onAuthStateChange((t,r)=>{var a,s;e&&(f(!!r),x(null!==(s=null==r?void 0:null===(a=r.user)||void 0===a?void 0:a.id)&&void 0!==s?s:null),b(!0))});return()=>{e=!1,t.subscription.unsubscribe()}},[]),(0,s.useEffect)(()=>{if(y&&!p&&j)try{localStorage.setItem(u,JSON.stringify(d))}catch(e){}},[d,p,y,j]),(0,s.useEffect)(()=>{if(y){if(p){let e=async()=>{if(!h)return;let{data:e,error:t}=await n.O.from("cart_items").select("product_id, name, image_url, price, qty").eq("user_id",h).order("created_at",{ascending:!1});!t&&e&&m(e.map(e=>{var t,r;return{id:null!==(t=e.product_id)&&void 0!==t?t:e.name,name:e.name,price:Number(e.price),image:null!==(r=e.image_url)&&void 0!==r?r:"",qty:e.qty}}))};(async()=>{try{let e=localStorage.getItem(u);if(!e)return;let t=JSON.parse(e);if(!Array.isArray(t)||0===t.length)return;let r=t.map(e=>({user_id:h,product_id:o(e.id)?e.id:null,name:e.name,image_url:e.image,price:e.price,qty:e.qty}));await n.O.from("cart_items").upsert(r,{onConflict:"user_id,product_id"}),localStorage.removeItem(u)}catch(e){}})().then(e)}else try{let e=localStorage.getItem(u);if(e){let t=JSON.parse(e);Array.isArray(t)&&m(t)}N(!0)}catch(e){N(!0)}}},[p,y,h]);let w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;m(r=>{let a=r.find(t=>t.id===e.id),s=a?r.map(r=>r.id===e.id?{...r,qty:r.qty+t}:r):[...r,{...e,qty:t}];if(p&&h){let r=a?a.qty+t:t;n.O.from("cart_items").upsert({user_id:h,product_id:o(e.id)?e.id:null,name:e.name,image_url:e.image,price:e.price,qty:r},{onConflict:"user_id,product_id"})}else try{localStorage.setItem(u,JSON.stringify(s)),N(!0)}catch(e){}return s}),g({id:Date.now(),name:e.name}),_.current&&clearTimeout(_.current),_.current=setTimeout(()=>{g(null)},2200)},I=e=>{m(t=>{let r=t.filter(t=>t.id!==e);return p&&h&&n.O.from("cart_items").delete().eq("user_id",h).eq("product_id",o(e)?e:null),r})},S=(e,t)=>{m(r=>{let a=r.map(r=>r.id===e?{...r,qty:t}:r).filter(e=>e.qty>0);return p&&h&&(t<=0?n.O.from("cart_items").delete().eq("user_id",h).eq("product_id",o(e)?e:null):n.O.from("cart_items").update({qty:t}).eq("user_id",h).eq("product_id",o(e)?e:null)),a})},O=()=>{if(m([]),p&&h)n.O.from("cart_items").delete().eq("user_id",h);else try{localStorage.removeItem(u)}catch(e){}},q=(0,s.useMemo)(()=>{let e=d.reduce((e,t)=>e+t.qty,0),t=d.reduce((e,t)=>e+t.qty*t.price,0);return{items:d,itemCount:e,total:t,addItem:w,removeItem:I,updateQty:S,clear:O}},[d]);return(0,a.jsxs)(c.Provider,{value:q,children:[t,v&&(0,a.jsxs)("div",{className:"fixed top-24 right-6 z-[70] flex items-center gap-3 rounded-2xl border border-slate-200 bg-white px-4 py-3 shadow-xl",children:[(0,a.jsx)("span",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-emerald-100 text-emerald-600",children:(0,a.jsx)(l.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-semibold text-slate-900",children:r("cart.added")}),(0,a.jsx)("div",{className:"text-xs text-slate-500 line-clamp-1",children:v.name})]})]})]})}function m(){let e=(0,s.useContext)(c);if(!e)throw Error("useCart must be used within CartProvider");return e}},3866:function(e,t,r){"use strict";r.d(t,{O:function(){return i}});var a=r(7204);let s="https://vlrzcbmjbywdptqizrmk.supabase.co".trim(),l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZscnpjYm1qYnl3ZHB0cWl6cm1rIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkzNjM0NzksImV4cCI6MjA4NDkzOTQ3OX0.pgB3GB70WRz95nQVMUvpQa8iSPwkpCO2g6Z4BVfZOiM".trim();if(!s||!l)throw Error("Missing Supabase environment variables.");try{new URL(s)}catch(e){throw Error('Invalid NEXT_PUBLIC_SUPABASE_URL: "'.concat(s,'". Use https://<project>.supabase.co'))}let i=(0,a.eI)(s,l)},4839:function(e,t,r){"use strict";t.Z=function(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=function e(t){var r,a,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t){if(Array.isArray(t)){var l=t.length;for(r=0;r<l;r++)t[r]&&(a=e(t[r]))&&(s&&(s+=" "),s+=a)}else for(a in t)t[a]&&(s&&(s+=" "),s+=a)}return s}(e))&&(a&&(a+=" "),a+=t);return a}}},function(e){e.O(0,[476,506,648,971,23,744],function(){return e(e.s=5937)}),_N_E=e.O()}]);