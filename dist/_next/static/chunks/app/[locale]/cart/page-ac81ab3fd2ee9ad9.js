(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[123],{3685:function(e,t,s){Promise.resolve().then(s.bind(s,8036))},2421:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},3231:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},8002:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},2513:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8960:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},883:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2022:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},8036:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var a=s(7437),l=s(6648),r=s(7138),n=s(8960),i=s(2022),c=s(3231);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,s(8030).Z)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);var o=s(2421),u=s(8002),m=s(2513),x=s(883),h=s(9989),f=s(8087),p=s(6463),b=s(9997),y=s(3866),g=s(2265);function v(){let e;let t=(0,f.useLocale)(),s=(0,f.useTranslations)("breadcrumbs"),v=(0,f.useTranslations)("nav"),j=(0,f.useTranslations)(),N=(0,f.useTranslations)("common"),{items:w,total:k,updateQty:C,removeItem:_,clear:S}=(0,h.j)(),Z=(0,p.useRouter)(),q=(0,p.useSearchParams)(),[O,I]=(0,g.useState)(!1),[M,E]=(0,g.useState)(""),[T,z]=(0,g.useState)(""),[A,D]=(0,g.useState)(null),[L,B]=(0,g.useState)(!1),[H,J]=(0,g.useState)(!0),[P,U]=(0,g.useState)({firstName:"",lastName:"",phone:"",country:"",address:"",postalCode:"",city:""}),R=Math.max(200-k,0),V=Math.min(k/200*100,100),W=(0,g.useMemo)(()=>w.reduce((e,t)=>e+t.qty,0),[w]),X=q.get("step"),Q="confirm"===X,Y="details"===X&&!O,F=O&&("details"===X||"confirm"===X);return(0,g.useEffect)(()=>{let e=!0;y.O.auth.getSession().then(t=>{let{data:s}=t;e&&I(!!s.session)});let{data:t}=y.O.auth.onAuthStateChange((t,s)=>{e&&I(!!s)});return()=>{e=!1,t.subscription.unsubscribe()}},[]),(0,g.useEffect)(()=>{if(!O)return;let e=!0;return(async()=>{var t,s,a,l,r,n,i,c;let{data:d}=await y.O.auth.getUser(),o=null==d?void 0:null===(t=d.user)||void 0===t?void 0:t.id;if(!o||!e)return;let{data:u}=await y.O.from("profiles").select("first_name, last_name, phone, country, address, postal_code, city").eq("id",o).single();u&&e&&U({firstName:null!==(s=u.first_name)&&void 0!==s?s:"",lastName:null!==(a=u.last_name)&&void 0!==a?a:"",phone:null!==(l=u.phone)&&void 0!==l?l:"",country:null!==(r=u.country)&&void 0!==r?r:"",address:null!==(n=u.address)&&void 0!==n?n:"",postalCode:null!==(i=u.postal_code)&&void 0!==i?i:"",city:null!==(c=u.city)&&void 0!==c?c:""})})(),()=>{e=!1}},[O]),(0,g.useEffect)(()=>{let e=window.matchMedia("(max-width: 639px)"),t=e=>J(!e);t(e.matches);let s=e=>t(e.matches);return e.addEventListener?e.addEventListener("change",s):e.addListener(s),()=>{e.removeEventListener?e.removeEventListener("change",s):e.removeListener(s)}},[]),(0,a.jsx)("div",{className:"bg-white",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-10",children:[(0,a.jsx)(b.default,{items:[{label:s("home"),href:"/".concat(t),isHome:!0},{label:v("cart")}]}),(0,a.jsx)("div",{className:"mb-8 hidden rounded-2xl bg-white px-4 py-4 sm:block sm:px-6",children:(()=>{var e;let t=[{icon:n.Z,title:j("cart.stepCart"),subtitle:j("cart.stepCartNote")},{icon:i.Z,title:j("cart.stepDetails"),subtitle:j("cart.stepDetailsNote")},{icon:c.Z,title:j("cart.stepConfirm"),subtitle:j("cart.stepConfirmNote")},{icon:d,title:j("cart.stepDelivery"),subtitle:j("cart.stepDeliveryNote")}],s=Math.max(0,Math.min(X&&null!==(e=({cart:0,details:1,confirm:2,delivery:3})[X])&&void 0!==e?e:0,t.length-1)),l=t.length>1?s/(t.length-1)*100:0;return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute left-10 right-10 top-8 h-px rounded-full bg-slate-200"}),(0,a.jsx)("div",{className:"absolute left-10 right-10 top-8 h-px rounded-full",children:(0,a.jsx)("div",{className:"h-full rounded-full bg-[#0ea5e9] transition-all",style:{width:"".concat(l,"%")}})}),(0,a.jsx)("div",{className:"relative grid gap-4 sm:grid-cols-4",children:t.map((e,t)=>{let l=e.icon;return(0,a.jsxs)("div",{className:"flex items-start gap-5",children:[(0,a.jsx)("div",{className:"flex h-16 w-16 items-center justify-center rounded-full ".concat(t<=s?"bg-[#0ea5e9] text-white":"bg-slate-100 text-slate-600"),children:(0,a.jsx)(l,{className:"h-8 w-8"})}),(0,a.jsxs)("div",{className:"pt-1",children:[(0,a.jsx)("div",{className:"text-[15px] font-semibold text-slate-900",children:e.title}),(0,a.jsx)("div",{className:"mt-2 text-[12px] text-slate-500",children:t<s?j("cart.stepDone"):e.subtitle})]})]},e.title)})})]})})()}),(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,a.jsxs)("div",{className:"flex-1",children:[!Y&&(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"font-heading text-3xl text-slate-900",children:j("cart.cartTitle")}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:j("cart.cartSubtitle")})]}),w.length>0&&(0,a.jsx)("div",{className:"h-5"})]}),Y?(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[minmax(0,1fr)_minmax(0,0.8fr)]",children:[(0,a.jsxs)("div",{className:"rounded-2xl border border-gray-200 bg-white p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-heading text-slate-900",children:j("cart.loginTitle")}),(0,a.jsx)("p",{className:"mt-1 text-sm text-slate-500",children:j("cart.loginSubtitle")}),(0,a.jsxs)("form",{className:"mt-5 space-y-4",onSubmit:async e=>{e.preventDefault(),D(null),B(!0);let s=M.trim(),a=T.trim(),{error:l}=await y.O.auth.signInWithPassword({email:s,password:a});l?D(l.message):Z.push("/".concat(t,"/cart?step=confirm")),B(!1)},children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-slate-700",children:[j("auth.email"),(0,a.jsx)("input",{type:"email",required:!0,value:M,onChange:e=>E(e.target.value),className:"mt-2 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm text-slate-900 outline-none focus:border-slate-400"})]}),(0,a.jsxs)("label",{className:"block text-sm font-medium text-slate-700",children:[j("auth.password"),(0,a.jsx)("input",{type:"password",required:!0,value:T,onChange:e=>z(e.target.value),className:"mt-2 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm text-slate-900 outline-none focus:border-slate-400"})]}),A&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:A}),(0,a.jsx)("button",{type:"submit",disabled:L,className:"w-full inline-flex items-center justify-center rounded-xl bg-[#7dd3fc] text-black px-5 py-3 font-semibold hover:bg-[#f5c542] transition-colors disabled:opacity-60",children:j("cart.loginButton")}),(0,a.jsx)(r.default,{href:"/".concat(t,"/auth?mode=register&returnTo=/").concat(t,"/cart?step=confirm"),className:"w-full inline-flex items-center justify-center rounded-xl border border-slate-200 text-slate-800 px-5 py-3 font-semibold hover:bg-slate-50 transition-colors",children:j("cart.registerButton")})]})]}),(0,a.jsxs)("div",{className:"rounded-2xl border border-gray-200 bg-white p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-heading text-slate-900",children:j("cart.newClientTitle")}),(0,a.jsx)("p",{className:"mt-1 text-sm text-slate-500",children:j("cart.newClientSubtitle")}),(0,a.jsxs)("ul",{className:"mt-4 space-y-2 text-sm text-slate-600",children:[(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"h-1.5 w-1.5 rounded-full bg-emerald-500"}),j("cart.newClientBenefit1")]}),(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"h-1.5 w-1.5 rounded-full bg-emerald-500"}),j("cart.newClientBenefit2")]}),(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"h-1.5 w-1.5 rounded-full bg-emerald-500"}),j("cart.newClientBenefit3")]})]})]})]}):F?(0,a.jsxs)("div",{className:"rounded-2xl border border-gray-200 bg-white p-4 sm:p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-heading text-slate-900",children:j("cart.stepDetails")}),H&&(0,a.jsx)("p",{className:"mt-1 text-sm text-slate-500",children:j("cart.detailsAuthedSubtitle")})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>J(e=>!e),className:"sm:hidden inline-flex items-center justify-center rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold text-slate-700","aria-expanded":H,children:[(0,a.jsx)("span",{className:"mr-1",children:N(H?"collapse":"expand")}),(0,a.jsx)(o.Z,{className:"h-3.5 w-3.5 transition-transform ".concat(H?"rotate-180":"")})]})]}),!H&&(0,a.jsxs)("p",{className:"mt-3 text-sm text-slate-600",children:[P.firstName," ",P.lastName]}),(0,a.jsxs)("div",{className:"mt-5 grid grid-cols-1 sm:grid-cols-2 gap-4 ".concat(H?"grid":"hidden sm:grid"),children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-slate-700",children:[j("account.fields.firstName"),(0,a.jsx)("input",{type:"text",value:P.firstName,onChange:e=>U(t=>({...t,firstName:e.target.value})),className:"mt-2 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm text-slate-900 outline-none focus:border-slate-400"})]}),(0,a.jsxs)("label",{className:"block text-sm font-medium text-slate-700",children:[j("account.fields.lastName"),(0,a.jsx)("input",{type:"text",value:P.lastName,onChange:e=>U(t=>({...t,lastName:e.target.value})),className:"mt-2 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm text-slate-900 outline-none focus:border-slate-400"})]}),(0,a.jsxs)("label",{className:"block text-sm font-medium text-slate-700",children:[j("account.fields.phone"),(0,a.jsx)("input",{type:"tel",value:P.phone,onChange:e=>U(t=>({...t,phone:e.target.value})),className:"mt-2 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm text-slate-900 outline-none focus:border-slate-400"})]}),(0,a.jsxs)("label",{className:"block text-sm font-medium text-slate-700",children:[j("account.fields.country"),(0,a.jsx)("input",{type:"text",value:P.country,onChange:e=>U(t=>({...t,country:e.target.value})),className:"mt-2 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm text-slate-900 outline-none focus:border-slate-400"})]}),(0,a.jsxs)("label",{className:"block text-sm font-medium text-slate-700 sm:col-span-2",children:[j("account.fields.address"),(0,a.jsx)("input",{type:"text",value:P.address,onChange:e=>U(t=>({...t,address:e.target.value})),className:"mt-2 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm text-slate-900 outline-none focus:border-slate-400"})]}),(0,a.jsxs)("label",{className:"block text-sm font-medium text-slate-700",children:[j("account.fields.postalCode"),(0,a.jsx)("input",{type:"text",value:P.postalCode,onChange:e=>U(t=>({...t,postalCode:e.target.value})),className:"mt-2 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm text-slate-900 outline-none focus:border-slate-400"})]}),(0,a.jsxs)("label",{className:"block text-sm font-medium text-slate-700",children:[j("account.fields.city"),(0,a.jsx)("input",{type:"text",value:P.city,onChange:e=>U(t=>({...t,city:e.target.value})),className:"mt-2 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm text-slate-900 outline-none focus:border-slate-400"})]})]})]}):0===w.length?(0,a.jsxs)("div",{className:"border border-gray-200 rounded-2xl p-10 text-center",children:[(0,a.jsx)("p",{className:"text-slate-800 font-semibold mb-2",children:j("cart.empty")}),(0,a.jsx)("p",{className:"text-slate-500 mb-4",children:j("cart.emptySubtitle")}),(0,a.jsx)(r.default,{href:"/".concat(t,"/catalog"),className:"inline-flex items-center justify-center px-6 py-3 rounded-xl bg-[#7dd3fc] text-black font-bold hover:bg-[#f5c542] transition-colors",children:j("cart.browseCatalog")})]}):(0,a.jsx)("div",{className:"space-y-4",children:w.map(e=>(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 border border-gray-200 rounded-2xl p-4",children:[(0,a.jsx)("div",{className:"w-24 h-24 relative rounded-xl overflow-hidden bg-white flex-shrink-0",children:(0,a.jsx)(l.default,{src:e.image,alt:e.name,fill:!0,sizes:"96px",className:"object-cover"})}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col sm:flex-row sm:items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-slate-800 font-semibold",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-black",children:[e.price," ",j("currency.uah")]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>C(e.id,e.qty-1),className:"w-8 h-8 rounded-full border border-gray-200 flex items-center justify-center hover:bg-gray-100 transition-colors","aria-label":"Decrease quantity",children:(0,a.jsx)(u.Z,{className:"w-4 h-4"})}),(0,a.jsx)("span",{className:"min-w-[32px] text-center font-semibold text-slate-700",children:e.qty}),(0,a.jsx)("button",{onClick:()=>C(e.id,e.qty+1),className:"w-8 h-8 rounded-full border border-gray-200 flex items-center justify-center hover:bg-gray-100 transition-colors","aria-label":"Increase quantity",children:(0,a.jsx)(m.Z,{className:"w-4 h-4"})})]}),(0,a.jsx)("button",{onClick:()=>_(e.id),className:"p-2 text-slate-400 hover:text-red-500 transition-colors","aria-label":"Remove item",children:(0,a.jsx)(x.Z,{className:"w-5 h-5"})})]})]})]},e.id))})]}),(0,a.jsx)("aside",{className:"w-full lg:w-[360px]",children:(0,a.jsxs)("div",{className:"border border-gray-200 rounded-2xl p-6 space-y-4 sticky top-24",children:[(0,a.jsx)("h2",{className:"font-heading text-xl text-slate-900",children:j("cart.summaryTitle")}),w.length>0&&(0,a.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"relative h-16 w-16 rounded-xl overflow-hidden bg-white flex-shrink-0",children:(0,a.jsx)(l.default,{src:w[0].image,alt:w[0].name,fill:!0,sizes:"64px",className:"object-cover"})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-slate-900 line-clamp-2",children:w[0].name}),(e=w[0].id,!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)&&w[0].id.length<=24&&(0,a.jsxs)("p",{className:"mt-2 text-xs text-slate-500",children:[j("cart.codeLabel")," ",w[0].id]}))]})})]})}),(0,a.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-slate-800",children:[(0,a.jsx)("span",{className:"icon-usp-freedelivery","aria-hidden":"true"}),j("cart.freeDeliveryTitle")]}),(0,a.jsx)("div",{className:"mt-1 text-xs text-slate-500",children:R>0?j("cart.freeDeliveryRemaining",{amount:R.toFixed(2),currency:j("currency.uah")}):j("cart.freeDeliveryUnlocked")}),(0,a.jsx)("div",{className:"mt-3 h-2 rounded-full bg-slate-100 overflow-hidden",children:(0,a.jsx)("div",{className:"h-full rounded-full bg-[#0ea5e9] transition-all",style:{width:"".concat(V,"%")}})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-slate-600",children:[(0,a.jsx)("span",{children:j("cart.totalLabel")}),(0,a.jsxs)("span",{className:"font-semibold text-slate-900",children:[k," ",j("currency.uah")]})]}),(0,a.jsxs)("div",{className:"rounded-xl bg-slate-50 px-4 py-3 text-sm text-slate-600 flex items-center justify-between",children:[(0,a.jsx)("span",{children:j("cart.itemsCount",{count:W})}),(0,a.jsxs)("span",{className:"font-semibold text-slate-900",children:[k," ",j("currency.uah")]})]}),(0,a.jsx)("button",{type:"button",onClick:()=>{if(!O){Z.push("/".concat(t,"/cart?step=details"));return}if(Q){Z.push("/".concat(t,"/payment"));return}Z.push("/".concat(t,"/cart?step=confirm"))},className:"w-full inline-flex items-center justify-center px-4 py-3 rounded-xl bg-[#7dd3fc] text-black font-bold hover:bg-[#f5c542] transition-colors disabled:opacity-60",disabled:0===w.length,children:Q?j("cart.payWithTotal",{total:k,currency:j("currency.uah")}):"delivery"===X?j("cart.checkoutWithTotal",{total:k,currency:j("currency.uah")}):j("cart.checkout")}),(0,a.jsx)("div",{className:"mt-3 grid grid-cols-5 gap-2",children:[{label:"Visa",src:"/paymant/visa.svg"},{label:"Mastercard",src:"/paymant/mastercard.svg"},{label:"BLIK",src:"/paymant/blik.svg"},{label:"Apple Pay",src:"/paymant/icons8-apple-pay-100.png"},{label:"Google Pay",src:"/paymant/google-pay-96.png"}].map(e=>(0,a.jsx)("span",{className:"inline-flex items-center justify-center rounded-full bg-white px-2 py-1.5",children:(0,a.jsx)("span",{className:"relative h-6 w-12",children:(0,a.jsx)(l.default,{src:e.src,alt:e.label,fill:!0,sizes:"48px",className:"object-contain"})})},e.label))})]})})]})]})})}function j(){return(0,a.jsx)(g.Suspense,{fallback:null,children:(0,a.jsx)(v,{})})}},9997:function(e,t,s){"use strict";s.d(t,{default:function(){return c}});var a=s(7437),l=s(7138);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(8030).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);var n=s(7592),i=s(4839);function c(e){let{items:t,className:s}=e;return(0,a.jsx)("div",{className:(0,i.Z)("sm:sticky sm:top-16 z-40 -mx-4 bg-slate-50 px-2 pt-2 pb-3 sm:pt-5 sm:pb-5 mb-3 sm:mb-6",s),children:(0,a.jsx)("nav",{className:"flex flex-wrap items-center gap-2 text-[13px] font-medium text-[#3e3e3e]",children:t.map((e,s)=>{let i=0===s,c=e.isHome?(0,a.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,a.jsx)(r,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:e.label})]}):(0,a.jsx)("span",{children:e.label});return(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[!i&&(0,a.jsx)(n.Z,{className:"h-4 w-4 text-slate-400"}),e.href?(0,a.jsx)(l.default,{href:e.href,className:"hover:text-slate-700 transition-colors",children:c}):(0,a.jsx)("span",{className:s===t.length-1?"text-slate-700":void 0,children:c})]},"".concat(e.label,"-").concat(s))})})})}},9989:function(e,t,s){"use strict";s.d(t,{Z:function(){return u},j:function(){return m}});var a=s(7437),l=s(2265),r=s(3231),n=s(8087),i=s(3866);let c=(0,l.createContext)(void 0),d="dreams-bait-cart",o=e=>/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e);function u(e){let{children:t}=e,s=(0,n.useTranslations)(),[u,m]=(0,l.useState)([]),[x,h]=(0,l.useState)(!1),[f,p]=(0,l.useState)(null),[b,y]=(0,l.useState)(!1),[g,v]=(0,l.useState)(null),[j,N]=(0,l.useState)(!1),w=(0,l.useRef)(null);(0,l.useEffect)(()=>{let e=!0;i.O.auth.getSession().then(t=>{var s,a;let{data:l}=t;if(!e)return;let r=l.session;h(!!r),p(null!==(a=null==r?void 0:null===(s=r.user)||void 0===s?void 0:s.id)&&void 0!==a?a:null),y(!0)});let{data:t}=i.O.auth.onAuthStateChange((t,s)=>{var a,l;e&&(h(!!s),p(null!==(l=null==s?void 0:null===(a=s.user)||void 0===a?void 0:a.id)&&void 0!==l?l:null),y(!0))});return()=>{e=!1,t.subscription.unsubscribe()}},[]),(0,l.useEffect)(()=>{if(b&&!x&&j)try{localStorage.setItem(d,JSON.stringify(u))}catch(e){}},[u,x,b,j]),(0,l.useEffect)(()=>{if(b){if(x){let e=async()=>{if(!f)return;let{data:e,error:t}=await i.O.from("cart_items").select("product_id, name, image_url, price, qty").eq("user_id",f).order("created_at",{ascending:!1});!t&&e&&m(e.map(e=>{var t,s;return{id:null!==(t=e.product_id)&&void 0!==t?t:e.name,name:e.name,price:Number(e.price),image:null!==(s=e.image_url)&&void 0!==s?s:"",qty:e.qty}}))};(async()=>{try{let e=localStorage.getItem(d);if(!e)return;let t=JSON.parse(e);if(!Array.isArray(t)||0===t.length)return;let s=t.map(e=>({user_id:f,product_id:o(e.id)?e.id:null,name:e.name,image_url:e.image,price:e.price,qty:e.qty}));await i.O.from("cart_items").upsert(s,{onConflict:"user_id,product_id"}),localStorage.removeItem(d)}catch(e){}})().then(e)}else try{let e=localStorage.getItem(d);if(e){let t=JSON.parse(e);Array.isArray(t)&&m(t)}N(!0)}catch(e){N(!0)}}},[x,b,f]);let k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;m(s=>{let a=s.find(t=>t.id===e.id),l=a?s.map(s=>s.id===e.id?{...s,qty:s.qty+t}:s):[...s,{...e,qty:t}];if(x&&f){let s=a?a.qty+t:t;i.O.from("cart_items").upsert({user_id:f,product_id:o(e.id)?e.id:null,name:e.name,image_url:e.image,price:e.price,qty:s},{onConflict:"user_id,product_id"})}else try{localStorage.setItem(d,JSON.stringify(l)),N(!0)}catch(e){}return l}),v({id:Date.now(),name:e.name}),w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{v(null)},2200)},C=e=>{m(t=>{let s=t.filter(t=>t.id!==e);return x&&f&&i.O.from("cart_items").delete().eq("user_id",f).eq("product_id",o(e)?e:null),s})},_=(e,t)=>{m(s=>{let a=s.map(s=>s.id===e?{...s,qty:t}:s).filter(e=>e.qty>0);return x&&f&&(t<=0?i.O.from("cart_items").delete().eq("user_id",f).eq("product_id",o(e)?e:null):i.O.from("cart_items").update({qty:t}).eq("user_id",f).eq("product_id",o(e)?e:null)),a})},S=()=>{if(m([]),x&&f)i.O.from("cart_items").delete().eq("user_id",f);else try{localStorage.removeItem(d)}catch(e){}},Z=(0,l.useMemo)(()=>{let e=u.reduce((e,t)=>e+t.qty,0),t=u.reduce((e,t)=>e+t.qty*t.price,0);return{items:u,itemCount:e,total:t,addItem:k,removeItem:C,updateQty:_,clear:S}},[u]);return(0,a.jsxs)(c.Provider,{value:Z,children:[t,g&&(0,a.jsxs)("div",{className:"fixed top-24 right-6 z-[70] flex items-center gap-3 rounded-2xl border border-slate-200 bg-white px-4 py-3 shadow-xl",children:[(0,a.jsx)("span",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-emerald-100 text-emerald-600",children:(0,a.jsx)(r.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-semibold text-slate-900",children:s("cart.added")}),(0,a.jsx)("div",{className:"text-xs text-slate-500 line-clamp-1",children:g.name})]})]})]})}function m(){let e=(0,l.useContext)(c);if(!e)throw Error("useCart must be used within CartProvider");return e}},3866:function(e,t,s){"use strict";s.d(t,{O:function(){return n}});var a=s(7204);let l="https://vlrzcbmjbywdptqizrmk.supabase.co".trim(),r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZscnpjYm1qYnl3ZHB0cWl6cm1rIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkzNjM0NzksImV4cCI6MjA4NDkzOTQ3OX0.pgB3GB70WRz95nQVMUvpQa8iSPwkpCO2g6Z4BVfZOiM".trim();if(!l||!r)throw Error("Missing Supabase environment variables.");try{new URL(l)}catch(e){throw Error('Invalid NEXT_PUBLIC_SUPABASE_URL: "'.concat(l,'". Use https://<project>.supabase.co'))}let n=(0,a.eI)(l,r)},4839:function(e,t,s){"use strict";t.Z=function(){for(var e,t,s=0,a="",l=arguments.length;s<l;s++)(e=arguments[s])&&(t=function e(t){var s,a,l="";if("string"==typeof t||"number"==typeof t)l+=t;else if("object"==typeof t){if(Array.isArray(t)){var r=t.length;for(s=0;s<r;s++)t[s]&&(a=e(t[s]))&&(l&&(l+=" "),l+=a)}else for(a in t)t[a]&&(l&&(l+=" "),l+=a)}return l}(e))&&(a&&(a+=" "),a+=t);return a}}},function(e){e.O(0,[476,506,648,971,23,744],function(){return e(e.s=3685)}),_N_E=e.O()}]);