(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[820],{7717:function(e,s,t){Promise.resolve().then(t.bind(t,9040))},9040:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return v}});var l=t(7437),a=t(2265),i=t(7138),r=t(6648),n=t(8087),c=t(6463),o=t(3866);let d=e=>{var s,t,l,a,i,r,n,c,o;return{id:e.id,slug:null!==(l=e.slug)&&void 0!==l?l:e.id,categorySlug:null!==(a=null===(t=e.category)||void 0===t?void 0:null===(s=t[0])||void 0===s?void 0:s.slug)&&void 0!==a?a:"",name:{uk:e.name_uk,pl:e.name_pl,en:e.name_en},description:{uk:null!==(i=e.description_uk)&&void 0!==i?i:"",pl:null!==(r=e.description_pl)&&void 0!==r?r:"",en:null!==(n=e.description_en)&&void 0!==n?n:""},code:null!==(c=e.code)&&void 0!==c?c:"",price:Number(e.price),oldPrice:e.old_price?Number(e.old_price):void 0,badge:"hit"===e.badge?"hit":"super"===e.badge||"price"===e.badge||"super-price"===e.badge?"super-price":"new"===e.badge?"new":void 0,purchasedCount:"number"==typeof e.purchased_count?e.purchased_count:void 0,stockCount:"number"==typeof e.stock_count?e.stock_count:void 0,image:null!==(o=e.image_url)&&void 0!==o?o:"",gallery:Array.isArray(e.gallery)?e.gallery:[]}},u="id, slug, code, name_uk, name_pl, name_en, description_uk, description_pl, description_en, price, old_price, badge, image_url, gallery, category:categories(slug)",m="".concat(u,", purchased_count, stock_count"),p=e=>({...e,purchased_count:null,stock_count:null}),x=e=>!!((null==e?void 0:e.message)&&(e.message.includes("purchased_count")||e.message.includes("stock_count"))),f=async e=>{var s,t,l;let{data:a,error:i}=await o.O.from("products").select(m).eq("is_active",!0).or("slug.eq.".concat(e,",id.eq.").concat(e)).maybeSingle();if(i&&x(i)){let s=await o.O.from("products").select(u).eq("is_active",!0).or("slug.eq.".concat(e,",id.eq.").concat(e)).maybeSingle();if(!s.error&&s.data)return d(p(s.data))}if(!i&&a)return d(a);let{data:r,error:n}=await o.O.from("products").select(m).eq("is_active",!0).like("slug","".concat(e,"%")).limit(10);if(n&&x(n)){let l=await o.O.from("products").select(u).eq("is_active",!0).like("slug","".concat(e,"%")).limit(10);r=null!==(t=null===(s=l.data)||void 0===s?void 0:s.map(p))&&void 0!==t?t:null,n=l.error}return n||!r||0===r.length?null:d(null!==(l=r.filter(s=>"string"==typeof s.slug&&e.startsWith(s.slug)).sort((e,s)=>{var t,l,a,i;return(null!==(a=null===(t=s.slug)||void 0===t?void 0:t.length)&&void 0!==a?a:0)-(null!==(i=null===(l=e.slug)||void 0===l?void 0:l.length)&&void 0!==i?i:0)})[0])&&void 0!==l?l:r[0])};var h=t(9997);function v(){var e;let s=(0,n.useTranslations)("account"),t=(0,n.useTranslations)("common"),d=(0,n.useTranslations)("breadcrumbs"),u=(0,n.useTranslations)("nav"),m=(0,n.useLocale)(),p=(0,c.useRouter)(),[x,v]=(0,a.useState)(!0),[g,b]=(0,a.useState)(null),[j,N]=(0,a.useState)("profile"),[y,_]=(0,a.useState)([]);(0,a.useEffect)(()=>{(async()=>{let{data:e}=await o.O.auth.getUser();if(!e.user){p.replace("/".concat(m,"/auth"));return}let{data:s}=await o.O.from("profiles").select("email, first_name, last_name, phone, country, address, postal_code, city, favorites").eq("id",e.user.id).maybeSingle();b(s),v(!1)})()},[m,p]);let k=Array.isArray(null==g?void 0:g.favorites)?null==g?void 0:g.favorites:[];if((0,a.useEffect)(()=>{let e=!0;return(async()=>{let s=await Promise.all(k.map(async e=>{var s,t;if(e.name&&e.image&&"number"==typeof e.price)return{id:e.id,slug:e.slug,name:e.name,image:e.image,price:e.price};let l=await f(e.slug||e.id);return{id:e.id,slug:e.slug,name:e.name||(null==l?void 0:null===(s=l.name)||void 0===s?void 0:s[m])||"-",image:e.image||(null==l?void 0:l.image),price:null!==(t=e.price)&&void 0!==t?t:null==l?void 0:l.price}}));e&&_(s)})(),()=>{e=!1}},[k,m]),x)return(0,l.jsx)("div",{className:"container mx-auto px-4 py-16 text-center text-slate-500",children:t("loading")});let w=async(e,s)=>{let{data:t}=await o.O.auth.getUser();if(!t.user){p.replace("/".concat(m,"/auth"));return}let l=k.filter(t=>t.slug!==e&&t.id!==s);await o.O.from("profiles").update({favorites:l}).eq("id",t.user.id),b(e=>e?{...e,favorites:l}:e)};return(0,l.jsx)("div",{className:"min-h-screen bg-slate-50 pt-28 pb-16",children:(0,l.jsxs)("div",{className:"container mx-auto px-4",children:[(0,l.jsx)(h.default,{items:[{label:d("home"),href:"/".concat(m),isHome:!0},{label:u("account")}]}),(0,l.jsxs)("div",{className:"mx-auto w-full max-w-2xl space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-heading mb-2",children:s("title")}),(0,l.jsx)("p",{className:"text-slate-500 text-sm",children:s("subtitle")})]}),(0,l.jsx)(i.default,{href:"/".concat(m),className:"text-sm text-slate-500 hover:text-slate-700",children:s("backToSite")})]}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,l.jsx)("button",{type:"button",onClick:()=>N("profile"),className:"rounded-full px-4 py-2 text-sm font-semibold transition-colors ".concat("profile"===j?"bg-[#7dd3fc] text-black":"bg-white text-slate-500 border border-slate-200"),children:s("menuProfile")}),(0,l.jsx)("button",{type:"button",onClick:()=>N("favorites"),className:"rounded-full px-4 py-2 text-sm font-semibold transition-colors ".concat("favorites"===j?"bg-[#7dd3fc] text-black":"bg-white text-slate-500 border border-slate-200"),children:s("menuFavorites")})]}),"profile"===j?(0,l.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm grid gap-4 sm:grid-cols-2",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs uppercase text-slate-400",children:s("fields.firstName")}),(0,l.jsx)("p",{className:"text-sm text-slate-800",children:(null==g?void 0:g.first_name)||"-"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs uppercase text-slate-400",children:s("fields.lastName")}),(0,l.jsx)("p",{className:"text-sm text-slate-800",children:(null==g?void 0:g.last_name)||"-"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs uppercase text-slate-400",children:s("fields.phone")}),(0,l.jsx)("p",{className:"text-sm text-slate-800",children:(null==g?void 0:g.phone)||"-"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs uppercase text-slate-400",children:s("fields.email")}),(0,l.jsx)("p",{className:"text-sm text-slate-800",children:(null==g?void 0:g.email)||"-"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs uppercase text-slate-400",children:s("fields.country")}),(0,l.jsx)("p",{className:"text-sm text-slate-800",children:(e=null==g?void 0:g.country)?s("auth.countries.".concat(e)):"-"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs uppercase text-slate-400",children:s("fields.city")}),(0,l.jsx)("p",{className:"text-sm text-slate-800",children:(null==g?void 0:g.city)||"-"})]}),(0,l.jsxs)("div",{className:"sm:col-span-2",children:[(0,l.jsx)("p",{className:"text-xs uppercase text-slate-400",children:s("fields.address")}),(0,l.jsx)("p",{className:"text-sm text-slate-800",children:(null==g?void 0:g.address)||"-"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs uppercase text-slate-400",children:s("fields.postalCode")}),(0,l.jsx)("p",{className:"text-sm text-slate-800",children:(null==g?void 0:g.postal_code)||"-"})]})]}):(0,l.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:s("favoritesTitle")}),0===y.length?(0,l.jsx)("p",{className:"text-sm text-slate-500",children:s("favoritesEmpty")}):(0,l.jsx)("div",{className:"grid gap-4",children:y.map(e=>(0,l.jsxs)("div",{className:"flex items-center gap-4 rounded-2xl border border-slate-200 p-4",children:[(0,l.jsx)("div",{className:"relative h-16 w-16 overflow-hidden rounded-xl bg-slate-50",children:e.image&&(0,l.jsx)(r.default,{src:e.image,alt:e.name||"-",fill:!0,sizes:"64px",className:"object-contain p-2"})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("p",{className:"text-sm font-semibold text-slate-800",children:e.name}),"number"==typeof e.price&&(0,l.jsxs)("p",{className:"text-xs text-black",children:[e.price," â‚¬"]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(i.default,{href:"/".concat(m,"/product/").concat(e.slug),className:"rounded-full border border-[#7dd3fc] px-3 py-1 text-xs font-semibold text-[#0f0f0f] hover:bg-[#7dd3fc]/20",children:s("favoritesView")}),(0,l.jsx)("button",{type:"button",onClick:()=>w(e.slug||e.id,e.id),className:"rounded-full bg-[#7dd3fc] px-3 py-1 text-xs font-semibold text-black hover:bg-[#f5c542]",children:s("favoritesRemove")})]})]},"".concat(e.id,"-").concat(e.slug)))})]})]})]})})}},9997:function(e,s,t){"use strict";t.d(s,{default:function(){return c}});var l=t(7437),a=t(7138);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,t(8030).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);var r=t(7592),n=t(4839);function c(e){let{items:s,className:t}=e;return(0,l.jsx)("div",{className:(0,n.Z)("sm:sticky sm:top-16 z-40 -mx-4 bg-slate-50 px-2 pt-2 pb-3 sm:pt-5 sm:pb-5 mb-3 sm:mb-6",t),children:(0,l.jsx)("nav",{className:"flex flex-wrap items-center gap-2 text-[13px] font-medium text-[#3e3e3e]",children:s.map((e,t)=>{let n=0===t,c=e.isHome?(0,l.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,l.jsx)(i,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"hidden sm:inline",children:e.label})]}):(0,l.jsx)("span",{children:e.label});return(0,l.jsxs)("span",{className:"flex items-center gap-2",children:[!n&&(0,l.jsx)(r.Z,{className:"h-4 w-4 text-slate-400"}),e.href?(0,l.jsx)(a.default,{href:e.href,className:"hover:text-slate-700 transition-colors",children:c}):(0,l.jsx)("span",{className:t===s.length-1?"text-slate-700":void 0,children:c})]},"".concat(e.label,"-").concat(t))})})})}},3866:function(e,s,t){"use strict";t.d(s,{O:function(){return r}});var l=t(7204);let a="https://vlrzcbmjbywdptqizrmk.supabase.co".trim(),i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZscnpjYm1qYnl3ZHB0cWl6cm1rIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkzNjM0NzksImV4cCI6MjA4NDkzOTQ3OX0.pgB3GB70WRz95nQVMUvpQa8iSPwkpCO2g6Z4BVfZOiM".trim();if(!a||!i)throw Error("Missing Supabase environment variables.");try{new URL(a)}catch(e){throw Error('Invalid NEXT_PUBLIC_SUPABASE_URL: "'.concat(a,'". Use https://<project>.supabase.co'))}let r=(0,l.eI)(a,i)},4839:function(e,s,t){"use strict";s.Z=function(){for(var e,s,t=0,l="",a=arguments.length;t<a;t++)(e=arguments[t])&&(s=function e(s){var t,l,a="";if("string"==typeof s||"number"==typeof s)a+=s;else if("object"==typeof s){if(Array.isArray(s)){var i=s.length;for(t=0;t<i;t++)s[t]&&(l=e(s[t]))&&(a&&(a+=" "),a+=l)}else for(l in s)s[l]&&(a&&(a+=" "),a+=l)}return a}(e))&&(l&&(l+=" "),l+=s);return l}}},function(e){e.O(0,[476,506,648,971,23,744],function(){return e(e.s=7717)}),_N_E=e.O()}]);